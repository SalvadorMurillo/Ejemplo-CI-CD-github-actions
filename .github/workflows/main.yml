# 1. Nombre de tu "receta" (aparecer谩 en la pesta帽a Actions)
name: Desplegar V1 y V2

# 2. CUNDO se va a ejecutar esta receta
on:
  push:
    # Solo se ejecutar谩 cuando haya un 'push' a estas ramas:
    branches:
      - main      # Para la Versi贸n 1
      - develop   # Para la Versi贸n 2

# 3. QU va a hacer
jobs:
  # Nombramos la tarea. Puedes ponerle "desplegar" o lo que quieras.
  construir-y-desplegar:
    
    # 4. En qu茅 tipo de computadora se ejecutar谩 (usa esta siempre)
    runs-on: ubuntu-latest

    # 5. La lista de pasos a seguir, en orden
    steps:
      
      # Paso 1: B谩sico. Baja tu c贸digo del repositorio a la m谩quina virtual.
      - name: 1. Bajar el c贸digo
        uses: actions/checkout@v4

      # --- Aqu铆 empieza la magia para diferenciar versiones ---

      # Paso 2.A: Solo se ejecuta si la rama es 'main'
      - name: 2.A. Desplegar Versi贸n 1 (Producci贸n)
        # Esta l铆nea 'if' es la clave de todo
        if: github.ref_name == 'main'
        run: |
          echo "Detect茅 la rama 'main'. 隆Desplegando la V1 (Producci贸n)! "
          # 
          # AQU PONES TUS COMANDOS REALES PARA LA V1
          # Ejemplo:
          # npm install
          # npm run build:prod
          # scp -r ./dist usuario@tu-servidor-v1.com:/var/www/html

      # Paso 2.B: Solo se ejecuta si la rama es 'develop'
      - name: 2.B. Desplegar Versi贸n 2 (Desarrollo)
        # Esta l铆nea 'if' es la clave de todo
        if: github.ref_name == 'develop'
        run: |
          echo "Detect茅 la rama 'develop'. 隆Desplegando la V2 (Desarrollo)! И"
          # 
          # AQU PONES TUS COMANDOS REALES PARA LA V2
          # Ejemplo:
          # npm install
          # npm run build:dev
          # scp -r ./dist usuario@tu-servidor-v2.com:/var/www/html
